<1> 먼저 recipe_info 테이블과 FK로 연결된 테이블을 먼저 삭제한다.

drop table COMMENT_INFO;
drop table HEART_INFO;
drop table MY_HEART_INFO;
drop table RECIPE_BOOK_INFO;
drop table MY_RECIPE_INFO;


<2> 그 이후 recipe_info 테이블을 삭제한다.

drop table recipe_info;


<3> 테이블을 다시 생성한다

CREATE TABLE USER_INFO(
USER_NICK VARCHAR2(20) CONSTRAINTS USER_NICK_PK PRIMARY KEY,
USER_NAME VARCHAR2(20) CONSTRAINTS USER_NAME_NN NOT NULL,
USER_EMAIL	VARCHAR2(40) CONSTRAINTS USER_EMAIL_NN NOT NULL,
USER_PASSWORD	VARCHAR2(20),
USER_QUESTION	VARCHAR2(60),
USER_ANSWER	VARCHAR2(60),
USER_PROFILE_IMG	VARCHAR2(100),
USER_FB_CHECK	VARCHAR2(5) CONSTRAINTS USER_FB_CHECK_NN NOT NULL
);


CREATE TABLE RECIPE_INFO(
RECIPE_ID	VARCHAR2(25) CONSTRAINTS RECIPE_ID_PK PRIMARY KEY,
RECIPE_COUNT	NUMBER(5) CONSTRAINTS RECIPE_COUNT_NN NOT NULL,
RECIPE_CONTENT	VARCHAR2(1000) CONSTRAINTS RECIPE_CONTENT_NN NOT NULL,
RECIPE_HASHTAG	VARCHAR2(200) CONSTRAINTS RECIPE_HASHTAG_NN NOT NULL,
RECIPE_IMG1	VARCHAR2(100) CONSTRAINTS RECIPE_IMG1_NN NOT NULL,
RECIPE_IMG2	VARCHAR2(100),
RECIPE_IMG3	VARCHAR2(100),
RECIPE_IMG4	VARCHAR2(100),
RECIPE_IMG5	VARCHAR2(100),
RECIPE_IMG6	VARCHAR2(100),
RECIPE_IMG7	VARCHAR2(100),
RECIPE_IMG8	VARCHAR2(100),
RECIPE_IMG9	VARCHAR2(100),
RECIPE_IMG10	VARCHAR2(100),
RECIPE_IMG_ORDER NUMBER(2) CONSTRAINTS RECIPE_IMG_ORDER_NN NOT NULL,
RECIPE_POSTTIME	VARCHAR2(12) CONSTRAINTS RECIPE_POSTTIME_NN NOT NULL,
USER_NICK	VARCHAR2(20) CONSTRAINTS RECIPE_USER_NICK_FK REFERENCES USER_INFO(USER_NICK) ON DELETE CASCADE 
);

CREATE TABLE COMMENT_INFO(
RECIPE_ID	VARCHAR2(25) CONSTRAINTS COMMENT_RECIPE_ID_FK REFERENCES RECIPE_INFO(RECIPE_ID) ON DELETE CASCADE,
COMMENT_TEXT	VARCHAR2(100) CONSTRAINTS COMMENT_TEXT_NN NOT NULL,
COMMENT_POSTTIME	VARCHAR2(12) CONSTRAINTS COMMENT_POSTTIME_NN NOT NULL,
COMMENT_ORDER	NUMBER(2) CONSTRAINTS COMMENT_ORDER_NN NOT NULL,
USER_NICK	VARCHAR2(20) CONSTRAINTS COMMENT_USER_NICK_FK REFERENCES USER_INFO(USER_NICK) ON DELETE CASCADE
);

CREATE TABLE HEART_INFO(
RECIPE_ID	VARCHAR2(25) CONSTRAINTS HEART_RECIPE_ID_FK REFERENCES RECIPE_INFO(RECIPE_ID) ON DELETE CASCADE,
HEART	NUMBER(5) CONSTRAINTS HEART_NN NOT NULL
);

CREATE TABLE MY_HEART_INFO(
RECIPE_ID	VARCHAR2(25) CONSTRAINTS MY_HEART_RECIPE_ID_FK REFERENCES RECIPE_INFO(RECIPE_ID) ON DELETE CASCADE,
USER_NICK	VARCHAR2(20) CONSTRAINTS MY_HEART_USER_NICK_FK REFERENCES USER_INFO(USER_NICK) ON DELETE CASCADE,
HEART_CHECK	VARCHAR2(5) CONSTRAINTS MY_HEART_CHECK_NN NOT NULL
);

CREATE TABLE RECIPE_BOOK_INFO(
RECIPE_ID	VARCHAR2(25) CONSTRAINTS BOOK_RECIPE_ID_FK REFERENCES RECIPE_INFO(RECIPE_ID) ON DELETE CASCADE,
CLIP_ORDER	NUMBER(5) CONSTRAINTS CLLP_ORDER_NN NOT NULL,
CLIP_USER	VARCHAR2(40) CONSTRAINTS CLIP_USER_NN NOT NULL
);


CREATE TABLE MY_RECIPE_INFO(
USER_NICK	VARCHAR2(20) CONSTRAINTS MY_RECIPE_USER_NICK_FK REFERENCES USER_INFO(USER_NICK) ON DELETE CASCADE,
RECIPE_ID	VARCHAR2(25) CONSTRAINTS MY_RECIPE_ID_FK REFERENCES RECIPE_INFO(RECIPE_ID) ON DELETE CASCADE
);


<4> 커밋!
commit;

